<!DOCTYPE HTML>

<html lang="en">
  
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Kathy&#39;s Tech Blog</title>
  <meta name="author" content="Kathy Miao">
  
  <meta name="description" content="Kathy Miao的技术博客">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Kathy&#39;s Tech Blog">

  
    <meta property="og:image" content="undefined">
  

  
    <meta http-equiv="Content-Language" content="en">
  

  <link href="/img/favicon.png" rel="icon">
  
    <link rel="apple-touch-icon" href="/img/apple-icon.png">
    <link rel="apple-touch-icon-precomposed" href="/img/apple-icon.png">
    

  <link rel="alternate" href="/atom.xml" title="Kathy&#39;s Tech Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  
  <style type="text/css">
  /* Tim Pietrusky advanced checkbox hack (Android <= 4.1.2) */
body{ -webkit-animation: bugfix infinite 1s; }
@-webkit-keyframes bugfix { from {padding:0;} to {padding:0;} }

  

  
    article .post-content-index .entry{max-height: 620px; overflow:hidden;}
  
</style>

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'null', 'auto');
  ga('send', 'pageview');
 
</script>




  
    
      <link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400|Playball" rel="stylesheet" type="text/css">
    
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.1.min.js"></script>

  



</head>
</html>

<body>
  <header id="header"><div class="padding inner">
	<div class="alignleft logo">
	  <h1><a href="/">Kathy&#39;s Tech Blog</a></h1>
	</div>
	<nav id="main-nav" class="alignright">
		<input type="checkbox" id="toggle">
		<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu" onclick><i class="fa fa-bars"></i></label>
	  <ul class="menu">
	    
	      <li><a href="/">Home</a></li>
	    
	      <li><a href="/archives">Archives</a></li>
	    
	    
	  </ul>
	</nav>
	<div class="clearfix"></div>
</div>
</header>
  <div id="page-heading-wrap">
  	<div class="inner">
      <div class="padding">
    		
          <h2>笨鸟也能展翅高飞</h2>
        
      </div>
  	</div>
  </div>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper" class="padding">
  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <div class="icon"></div>
            
    
      <h1 class="title transition"><a href="/2019/11/25/multiChannel-share/">多渠道分享实践</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2019-11-25T02:50:17.000Z">2019-11-25</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Kathy Miao</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <h1 id="多渠道分享实践"><a href="#多渠道分享实践" class="headerlink" title="多渠道分享实践"></a>多渠道分享实践</h1><p>财富云平台的业务场景有包括海外渠道等多渠道的分享需求，结合了国内微信的分享，设计了一套多渠道分享方案。</p>
<blockquote>
<p>本文涉及到的分享渠道有微信、微信朋友圈、Facebook、Twitter、Messenger、Instagram、Viber 和 Whatsapp。主要介绍了以上渠道的分享方式，以及根据业务场景设计的分享方案。</p>
</blockquote>
<p>以上渠道分享出来的卡片样式大同小异，主要包括：<strong>title</strong>、<strong>description</strong>、<strong>image</strong>，以及分享文案，我们可以命名为 <strong>content</strong>。</p>
          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2019/11/25/multiChannel-share/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <div class="icon"></div>
            
    
      <h1 class="title transition"><a href="/2017/09/05/commonjsEsm/">Node.js, TC-39, and Modules</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2017-09-05T12:06:39.000Z">2017-09-05</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Kathy Miao</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <h1 id="Node-js-TC-39-and-Modules"><a href="#Node-js-TC-39-and-Modules" class="headerlink" title="Node.js, TC-39, and Modules"></a>Node.js, TC-39, and Modules</h1><p>James M Snell</p>
<p>Katherina Miao（翻译）</p>
<p><a href="https://hackernoon.com/node-js-tc-39-and-modules-a1118aecf95e" target="_blank" rel="noopener">原文链接</a></p>
<hr>
<p>本周我第一次参加了 TC-39 会议。可能有人还不知道，TC-39 是 ECMA 工作组的编号，是他们定义了 ECMAScript 语言（或者更常见的“JavaScript”）。这个工作组敲定（通常是纠结的）并通过了 JavaScript 语言的细枝末节，以确保 JavaScript 编程语言不断发展并继续满足开发人员的需求。</p>
<p>我本周参加 TC-39 会议的原因非常简单：TC-39 定义的一种较新的 JavaScript 语言 - 即模块 - 导致 Node.js 核心团队遇到了一些困扰。我们（主要是Bradley Farias - Twitter@bradleymeck）一直试图弄清楚如何以最好的方式使 Node.js 支持 ECMAScript 模块（ESM），又不会弄出乱子。</p>
<p>问题实际上并不是我们无法按照目前规范定义的方式在 Node.js 中实现 ESM，而是如果完全按照规范的要求做意味着需要减少 Node.js 预期功能，开发者只能得到次优体验。我们非常希望确保 Node.js 中的 ESM 实现最优又可用。由于这个问题比较复杂，为了得到最有效的解决方案，我们与 TC-39 成员坐下来面谈。幸运的是，我认为我们取得了一些重大进展。</p>
<p>为了能更好的解释当前的问题和我们的计划，让我花一些时间来解释一些引起了我们最关注的基本问题。<br>
          
        
      </p></div>
      <footer>
        
          <div class="alignright">
            <a href="/2017/09/05/commonjsEsm/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <div class="icon"></div>
            
    
      <h1 class="title transition"><a href="/2016/05/12/todolist-react/">【练手】Webpack+React开发Todolist项目</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2016-05-12T15:46:45.000Z">2016-05-12</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Kathy Miao</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <p>主流框架在不停的更新换代。在使用了gulp＋Jquery半年以上的时候，为了跟上步伐，决定尝试用webpack＋react做一个简单的app来熟悉下。</p>
<p><em>Todo List</em> 就决定是你了！</p>
<h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><p>第一次接触webpack的时候觉得这个想法惊为天人！通过各种loader将所有的资源打包，然后插入到html里面：所有非js的资源，都需要通过相对应的loader。而且webpack内还整合很多功能，模块加载啊，ES6支持啊。。。</p>
<p><img src="../../../../img/todolist-react1.png" alt="clipboard.png"><a href="https://webpack.github.io/docs/what-is-webpack.html" target="_blank" rel="noopener">What is webpack?</a></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>安装过程不做赘述，webpack官网有更详细的描述，通过npm安装：<code>$ npm install webpack --save-dev</code></p>
<h3 id="Loader-amp-Plugins"><a href="#Loader-amp-Plugins" class="headerlink" title="Loader&amp;Plugins"></a>Loader&amp;Plugins</h3><p>之前说webpack是把非js资源转换成js，那么就有各式各样的loader，在<a href="https://webpack.github.io/docs/list-of-loaders.html" target="_blank" rel="noopener">List of Loaders</a>可以查看列表，但一般来说，会用到如下几种：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">css-loader //将css打包</span><br><span class="line">style-loader //将样式输出</span><br><span class="line">url-loader //解析url，小图片会被解析为data-url</span><br></pre></td></tr></table></figure>
<p>除此之外，还有file、json、sass等loader。这里因为使用了React，所以除了这些，还安装了babel-loader。<br>通过babel，可以将jsx转换成js，也可以使用es6语法。</p>
<p>安装：<code>$ npm install style-loader css-loader url-loader babel-loader sass-loader --save-dev</code></p>
<p>插件可以提供打包相关的功能：比如将指定打包的<code>CommonsChunkPlugin</code>；压缩js代码的<code>UglifyJsPlugin</code>；限制合并的<code>LimitChunkCountPlugin</code>。</p>
<p>具体的插件说明可以在<a href="https://webpack.github.io/docs/list-of-plugins.html" target="_blank" rel="noopener">List of Plugins</a>中查看。</p>
<h3 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h3><p>要用webpack，需要配置webpack.config.js。在这个配置里面，entry就是这个app的入口在src文件夹，output是编译之后的脚本在dist文件夹。因为这里用了CommonsChunkPlugin，将引用的库单独导出，所以在entry里配置了vendor，编译过之后会生成vendor.js。在module里面可以配置loader，jsx用到babel的es2015和react，scss用到了style、css和sass。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var webpack = require(&apos;webpack&apos;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &apos;./dist/[name].js&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    entry: &#123;</span><br><span class="line">        vendor: [</span><br><span class="line">            &apos;react&apos;,</span><br><span class="line">            &apos;react-dom&apos;</span><br><span class="line">        ],</span><br><span class="line">        app: &apos;./src/index.jsx&apos;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    module: &#123;</span><br><span class="line">        loaders: [</span><br><span class="line">            &#123;test: /\.jsx$/, exclude: /node_modules/, loader: &apos;babel&apos;, query: &#123;presets: [&apos;es2015&apos;, &apos;react&apos;]&#125;&#125;,</span><br><span class="line">            &#123;test: /\.scss$/, exclude: /node_modules/, loaders: [&quot;style&quot;, &quot;css&quot;, &quot;sass&quot;]&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    plugins: [</span><br><span class="line">        new webpack.optimize.CommonsChunkPlugin(&apos;vendor&apos;, &apos;./dist/vendor.js&apos;),</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>需要建立一个html文件，将编译过的脚本引入，如果使用脚本分块的话，一定要注意先后依赖：比如vendor.js要在app.js之前。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;./dist/vendor.js&quot;type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;./dist/app.js&quot;type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><p>第一次接触React，我是懵逼的。</p>
<p>长时间函数式、关注分离，第一次接触MVVM，表示很纠结、也很方便。纠结的是事件绑定与组建通信的方式；方便的是不用在意界面的修改，而专注于业务。</p>
<p>推荐入门阅读我大神男友的博文：<a href="http://zjy.name/archives/first-met-React.html" target="_blank" rel="noopener">初识 React</a></p>
<h3 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h3><p>在.jsx文件中，可以直接返回一个元素：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/* 这里的className，是样式class。*/</span><br><span class="line">return (</span><br><span class="line">  &lt;div className=&quot;content&quot;&gt;</span><br><span class="line">    Hello, world!</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>直接写标签，简单易读～！<br>如果要建组件，要用到<code>React.createClass</code>，注意的一点是组件名一定要首字母大写。<br>React会建立虚拟DOM树，再之后的更改中会建立另一个DOM树，然后通过有效的比对，在界面上做出相应的更改。</p>
<h3 id="state-amp-props"><a href="#state-amp-props" class="headerlink" title="state&amp;props"></a>state&amp;props</h3><p>在react组件中，有<code>state</code>和<code>props</code>这两个接口。</p>
<p><code>props</code>是可以为组件组件传递参数，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var Greating = React.createClass(&#123;</span><br><span class="line">  render: function()&#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;h1&gt;Hello, I&apos;m &#123;this.props.name&#125;! &lt;/h1&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">React.render(&lt;Greating name=&quot;Katherina&quot; /&gt;, document.body);</span><br></pre></td></tr></table></figure>
<p>父组件向子组件的参数传递通过<code>props</code>，除此之外可以通过<code>getDefaultProps</code>这个生命周期方法来设置。</p>
<p><code>state</code>参数是用来实现交互的。起初使用<code>getInitialState</code>获得最初的一个<code>state</code>状态，之后使用<code>setState</code>来控制。</p>
<p>比起手动维护交互时界面的变化，用<code>state</code>就方便多了，然而子组件若是想要改变父组件的<code>state</code>，只能通过事件向父组件传递。</p>
<p>这里就先不举例啦，到<em>Todo List</em>的时候仔细说说。</p>
<p>####生命周期方法####</p>
<p>这次生命周期方法只用到了<code>getInitialState</code>，对于各个方法使用心得和避坑还是参考<a href="http://zjy.name/archives/first-met-React.html" target="_blank" rel="noopener">初识 React</a>。</p>
<p>React组件是一个从加载－》更新－》卸载的过程，一共提供10个生命周期方法：</p>
<ul>
<li><code>getDefaultProps</code>：第一次实例化调用，给组件提供props</li>
<li><code>getInitialState</code>：创建实例时调用，给组件提供初始state</li>
<li><code>componentWillMount</code>：加载组件前调用，可以访问到props和state，并可以修改state</li>
<li><code>render</code>：创建虚拟DOM，每个组件必需的方法</li>
<li><code>componentDidMount</code>：组件加载完成后调用，此时可以通过this.getDOMNode()访问到DOM。</li>
<li><code>componentWillReceiveProps</code>：组件props更新前调用，将props作为参数传入</li>
<li><code>shouldComponentUpdate</code>：组件将要更新时调用，新的 props 和 state 将会作为该方法的参数，该方法应当返回一个布尔值，返回false表示跳过后续的生命周期方法。</li>
<li><code>componentWillUpdate</code>：组件更新之前调用，接收到新的props或者state作为参数，此时不能更新state。</li>
<li><code>componentDidUpdate</code>：组件渲染完成后调用，此时可以访问到新的DOM元素。</li>
<li><code>componentWillUnmount</code>：卸载组件之前调用，可以做一些清理工作，比如清除计时器。</li>
</ul>
<p>组件加载的时候，会依次调用： (<code>getDefaultProps</code>)、 <code>getInitialState</code>、 <code>componentWillMount</code>、<code>render</code> 和 <code>componentDidMount</code>。<br>其中，只有<code>getDefaultProps</code>是只有第一次实例化才会调用的，之后<code>props</code>会保存下来为组件直接调用。</p>
<p>更新的时候，会依次调用： <code>componentWillReceiveProps</code>、 <code>shouldComponentUpdate</code>、 <code>componentWillUpdate</code>、 <code>render</code> 和 <code>componentDidUpdate</code>。</p>
<p>卸载的时候，会调用<code>componentWillUnmount</code>。</p>
<h2 id="TODOS"><a href="#TODOS" class="headerlink" title="TODOS"></a>TODOS</h2><p>Todo List是一个经典入门练习。<br>第一次做webpack＋react，因为这两个对我来说都是新东西，所以一开始有点困难。遇到问题也找不到是webpack配置问题，还是react语法问题（对不起，我真的很笨。。。</p>
<p>Anyway，这个入门是在react官网上demo的基础上延伸的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">var TodoList = React.createClass(&#123;</span><br><span class="line">  render: function() &#123;</span><br><span class="line">    var createItem = function(itemText) &#123;</span><br><span class="line">      return &lt;li&gt;&#123;itemText&#125;&lt;/li&gt;;</span><br><span class="line">    &#125;;</span><br><span class="line">    return &lt;ul&gt;&#123;this.props.items.map(createItem)&#125;&lt;/ul&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">var TodoApp = React.createClass(&#123;</span><br><span class="line">  getInitialState: function() &#123;</span><br><span class="line">    return &#123;items: [], text: &apos;&apos;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  onChange: function(e) &#123;</span><br><span class="line">    this.setState(&#123;text: e.target.value&#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  handleSubmit: function(e) &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    var nextItems = this.state.items.concat([this.state.text]);</span><br><span class="line">    var nextText = &apos;&apos;;</span><br><span class="line">    this.setState(&#123;items: nextItems, text: nextText&#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  render: function() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;TODO&lt;/h3&gt;</span><br><span class="line">        &lt;TodoList items=&#123;this.state.items&#125; /&gt;</span><br><span class="line">        &lt;form onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">          &lt;input onChange=&#123;this.onChange&#125; value=&#123;this.state.text&#125; /&gt;</span><br><span class="line">          &lt;button&gt;&#123;&apos;Add #&apos; + (this.state.items.length + 1)&#125;&lt;/button&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">React.render(&lt;TodoApp /&gt;, mountNode);</span><br></pre></td></tr></table></figure>
<p><a href="https://facebook.github.io/react/" target="_blank" rel="noopener">A JavaScript library for building user interfaces | React</a></p>
<p>这个demo把一个Todo List的基础功能实现了：可以将新任务添加到任务列表中。</p>
<p>TodoApp是父组件，它用了生命周期方法<code>getInitialState</code>来设置文本框的状态<code>text</code>，列表内的项目<code>items</code>。<br>每次改变文本框内容，<code>setState</code>会改变<code>text</code>的值。在提交的时候，会给<code>items</code>数组多添加一项，同时置空<code>text</code>和文本框。<br>按钮上面的数字是目前任务条目的个数，当<code>items</code>数组多添加一项的时候，按钮也会随之加1。<br>TodoApp是父组件中引入了TodoList子组件，并传递了<code>items</code>。在TodoList组建中，对<code>props.items</code>用<code>map</code>方法添加了条目。</p>
<p>在此基础上，我除了把界面做漂亮之外（对不起，视觉系的人不能对着毫无样式的页面做功能。。）还增加了勾选完成和删除任务功能。</p>
<p><img src="../../../../img/todolist-react2.png" alt="clipboard.png"><br>——最后效果。（用了sass，需要在入口文件中<code>require</code></p>
<p>为了让内容记录可以保存，这里使用<code>localStorage</code>来储存。在一开始<code>getInitialState</code>中读取到<code>items</code>，然后每次提交添加、修改和删除条目的时候，都会修改<code>state</code>和<code>localStorage</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getInitialState: function() &#123;</span><br><span class="line">   var itemsFromStorage = localStorage.getItem(&apos;TODOs&apos;)?window.JSON.parse(localStorage.getItem(&apos;TODOs&apos;)):[];</span><br><span class="line">   return &#123;items: itemsFromStorage, text: &apos;&apos;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在添加列表条目的基础上，条目上的勾选完成和删除也是修改<code>state</code>。起初添加条目的时候，为条目添加状态 active：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">handleSubmit: function(e) &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    var nextItems = this.state.items.concat([&#123;text: this.state.text, status:&apos;active&apos;&#125;]);</span><br><span class="line">    var nextText = &apos;&apos;;</span><br><span class="line">    var itemJson = JSON.stringify(nextItems);</span><br><span class="line">    localStorage.setItem(&apos;TODOs&apos;,itemJson);</span><br><span class="line">    this.setState(&#123;items: nextItems, text: nextText&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后在勾选完成的时候，会修改<code>status</code>为done：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">changeStatus: function(e) &#123;</span><br><span class="line">    var key = e.target.parentNode.getAttribute(&apos;id&apos;);</span><br><span class="line">    var items = this.state.items;</span><br><span class="line">    var status = this.state.items[key][&apos;status&apos;];</span><br><span class="line">    if (status === &apos;done&apos;)&#123;</span><br><span class="line">        items[key][&apos;status&apos;] = &apos;active&apos;;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        items[key][&apos;status&apos;] = &apos;done&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">    this.changeStates(items);</span><br><span class="line">&#125;,</span><br><span class="line">changeStates: function(items) &#123;</span><br><span class="line">    this.setState(&#123;items: items&#125;);</span><br><span class="line">    localStorage.setItem(&apos;TODOs&apos;,JSON.stringify(items));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除此之外，删除条目的时候，根据条目的索引，删除state中对应项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">removeItem: function(e) &#123;</span><br><span class="line">    var key = e.target.parentNode.getAttribute(&apos;id&apos;);</span><br><span class="line">    var items = this.state.items;</span><br><span class="line">    items.splice(key, 1);</span><br><span class="line">    this.changeStates(items);</span><br><span class="line">&#125;,</span><br><span class="line">changeStates: function(items) &#123;</span><br><span class="line">    this.setState(&#123;items: items&#125;);</span><br><span class="line">    localStorage.setItem(&apos;TODOs&apos;,JSON.stringify(items));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另外，加了一个用作筛选的选项卡，在子组件中添加一个额外的<code>state</code>：all的时候显示所有；active的时候显示未完成的；complete的时候显示已完成。点击标签的时候，切换<code>state</code>，然后在<code>render</code>的时候做筛选：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">var TodoList = React.createClass(&#123;</span><br><span class="line">    changeTab : function(e)&#123;</span><br><span class="line">        var type = e.target.getAttribute(&apos;type&apos;);</span><br><span class="line">        this.setState(&#123;type:type&#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    getInitialState: function() &#123;</span><br><span class="line">        return &#123;type:&apos;all&apos;&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    render: function() &#123;</span><br><span class="line">        var style = &#123;&#125;;</span><br><span class="line">        if(this.props.items.length === 0)&#123;</span><br><span class="line">            style = &#123;display:&apos;none&apos;&#125;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return &lt;div className=&quot;itemList&quot;&gt;</span><br><span class="line">            &lt;div className=&quot;clearfix&quot;&gt;</span><br><span class="line">                &#123;this.props.items.length&#125; items</span><br><span class="line">                &lt;nav style=&#123;style&#125;&gt;</span><br><span class="line">                    &lt;a className=&#123;this.state.type === &apos;all&apos;?&apos;navTab active&apos;:&apos;navTab&apos;&#125; type=&apos;all&apos; onClick=&#123;this.changeTab&#125;&gt;ALL&lt;/a&gt;</span><br><span class="line">                    &lt;a className=&#123;this.state.type === &apos;active&apos;?&apos;navTab active&apos;:&apos;navTab&apos;&#125; type=&apos;active&apos; onClick=&#123;this.changeTab&#125;&gt;ACTIVE&lt;/a&gt;</span><br><span class="line">                    &lt;a className=&#123;this.state.type === &apos;done&apos;?&apos;navTab active&apos;:&apos;navTab&apos;&#125; type=&apos;done&apos; onClick=&#123;this.changeTab&#125;&gt;COMPLETE&lt;/a&gt;</span><br><span class="line">                &lt;/nav&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">                &#123;this.props.items.map((item, index)=&gt;&#123;</span><br><span class="line">                        if(this.state.type === &apos;all&apos;||this.state.type === item.status)&#123;</span><br><span class="line">                            return &lt;li key=&#123;index&#125; id=&#123;index&#125; className=&#123;item.status&#125;&gt;</span><br><span class="line">                            &lt;input type=&quot;checkbox&quot; className=&quot;toggle&quot; onChange=&#123;this.props.changeStatus&#125; checked=&#123;item.status === &apos;done&apos;&#125;/&gt;</span><br><span class="line">                            &lt;lable&gt;&#123;item.text&#125;&lt;/lable&gt;</span><br><span class="line">                            &lt;button className=&quot;remove&quot; onClick=&#123;this.props.removeItem&#125;&gt;&lt;/button&gt;</span><br><span class="line">                        &lt;/li&gt;;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">        &lt;/div&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>最后要说的是组件之间的数据传递。<br>父组件向子组件传递，通过<code>props</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;TodoList items=&#123;this.state.items&#125; changeStatus=&#123;this.changeStatus&#125; removeItem=&#123;this.removeItem&#125;/&gt;</span><br></pre></td></tr></table></figure>
<p>而子组件向父组件传递，通过事件。事件定义在父组件，通过<code>props</code>传递到子组件，绑定触发时可以改变父组件的<code>state</code>。</p>
<p>下面就是index.jsx的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">var TodoList = React.createClass(&#123;</span><br><span class="line">    changeTab : function(e)&#123;</span><br><span class="line">        var type = e.target.getAttribute(&apos;type&apos;);</span><br><span class="line">        this.setState(&#123;type:type&#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    getInitialState: function() &#123;</span><br><span class="line">        return &#123;type:&apos;all&apos;&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    render: function() &#123;</span><br><span class="line">        var style = &#123;&#125;;</span><br><span class="line">        if(this.props.items.length === 0)&#123;</span><br><span class="line">            style = &#123;display:&apos;none&apos;&#125;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return &lt;div className=&quot;itemList&quot;&gt;</span><br><span class="line">            &lt;div className=&quot;clearfix&quot;&gt;</span><br><span class="line">                &#123;this.props.items.length&#125; items</span><br><span class="line">                &lt;nav style=&#123;style&#125;&gt;</span><br><span class="line">                    &lt;a className=&#123;this.state.type === &apos;all&apos;?&apos;navTab active&apos;:&apos;navTab&apos;&#125; type=&apos;all&apos; onClick=&#123;this.changeTab&#125;&gt;ALL&lt;/a&gt;</span><br><span class="line">                    &lt;a className=&#123;this.state.type === &apos;active&apos;?&apos;navTab active&apos;:&apos;navTab&apos;&#125; type=&apos;active&apos; onClick=&#123;this.changeTab&#125;&gt;ACTIVE&lt;/a&gt;</span><br><span class="line">                    &lt;a className=&#123;this.state.type === &apos;done&apos;?&apos;navTab active&apos;:&apos;navTab&apos;&#125; type=&apos;done&apos; onClick=&#123;this.changeTab&#125;&gt;COMPLETE&lt;/a&gt;</span><br><span class="line">                &lt;/nav&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">                &#123;this.props.items.map((item, index)=&gt;&#123;</span><br><span class="line">                        if(this.state.type === &apos;all&apos;||this.state.type === item.status)&#123;</span><br><span class="line">                            return &lt;li key=&#123;index&#125; id=&#123;index&#125; className=&#123;item.status&#125;&gt;</span><br><span class="line">                            &lt;input type=&quot;checkbox&quot; className=&quot;toggle&quot; onChange=&#123;this.props.changeStatus&#125; checked=&#123;item.status === &apos;done&apos;&#125;/&gt;</span><br><span class="line">                            &lt;lable&gt;&#123;item.text&#125;&lt;/lable&gt;</span><br><span class="line">                            &lt;button className=&quot;remove&quot; onClick=&#123;this.props.removeItem&#125;&gt;&lt;/button&gt;</span><br><span class="line">                        &lt;/li&gt;;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">        &lt;/div&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">var TodoApp = React.createClass(&#123;</span><br><span class="line">    getInitialState: function() &#123;</span><br><span class="line">        var itemsFromStorage = localStorage.getItem(&apos;TODOs&apos;)?window.JSON.parse(localStorage.getItem(&apos;TODOs&apos;)):[];</span><br><span class="line">        return &#123;items: itemsFromStorage, text: &apos;&apos;&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    onChange: function(e) &#123;</span><br><span class="line">        this.setState(&#123;text: e.target.value&#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    handleSubmit: function(e) &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        var nextItems = this.state.items.concat([&#123;text: this.state.text, status:&apos;active&apos;&#125;]);</span><br><span class="line">        var nextText = &apos;&apos;;</span><br><span class="line">        var itemJson = JSON.stringify(nextItems);</span><br><span class="line">        localStorage.setItem(&apos;TODOs&apos;,itemJson);</span><br><span class="line">        this.setState(&#123;items: nextItems, text: nextText&#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    changeStatus: function(e) &#123;</span><br><span class="line">        var key = e.target.parentNode.getAttribute(&apos;id&apos;);</span><br><span class="line">        var items = this.state.items;</span><br><span class="line">        var status = this.state.items[key][&apos;status&apos;];</span><br><span class="line">        if (status === &apos;done&apos;)&#123;</span><br><span class="line">            items[key][&apos;status&apos;] = &apos;active&apos;;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            items[key][&apos;status&apos;] = &apos;done&apos;;</span><br><span class="line">        &#125;</span><br><span class="line">        this.changeStates(items);</span><br><span class="line">    &#125;,</span><br><span class="line">    changeStates: function(items) &#123;</span><br><span class="line">        this.setState(&#123;items: items&#125;);</span><br><span class="line">        localStorage.setItem(&apos;TODOs&apos;,JSON.stringify(items));</span><br><span class="line">    &#125;,</span><br><span class="line">    removeItem: function(e) &#123;</span><br><span class="line">        var key = e.target.parentNode.getAttribute(&apos;id&apos;);</span><br><span class="line">        var items = this.state.items;</span><br><span class="line">        items.splice(key, 1);</span><br><span class="line">        this.changeStates(items);</span><br><span class="line">    &#125;,</span><br><span class="line">    render: function() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div className=&quot;pure-u-11-12&quot;&gt;</span><br><span class="line">                &lt;header&gt;</span><br><span class="line">                    &lt;h3&gt;TODOs&lt;/h3&gt;</span><br><span class="line">                &lt;/header&gt;</span><br><span class="line">                &lt;form onSubmit=&#123;this.handleSubmit&#125; className=&apos;submitForm&apos;&gt;</span><br><span class="line">                    &lt;input type=&apos;text&apos; className=&apos;submitInput pure-u-3-4 pure-u-md-5-6 pure-u-lg-7-8&apos; onChange=&#123;this.onChange&#125; value=&#123;this.state.text&#125; placeholder=&quot;What needs to be done?&quot;/&gt;</span><br><span class="line">                    &lt;button className=&apos;submitBtn pure-u-1-4 pure-u-md-1-6 pure-u-lg-1-8&apos; disabled=&#123;this.state.text===&apos;&apos;&#125;&gt;&#123;&apos;Add&apos;&#125;&lt;/button&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">                &lt;TodoList items=&#123;this.state.items&#125; changeStatus=&#123;this.changeStatus&#125; removeItem=&#123;this.removeItem&#125;/&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>完整代码请戳&gt;&gt;<a href="https://github.com/Katherina-Miao/todolist-react" target="_blank" rel="noopener">github: todolist-react</a></p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2016/05/12/todolist-react/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <div class="icon"></div>
            
    
      <h1 class="title transition"><a href="/2015/12/06/pushState/">【经验总结】pushState＋ajax应用</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2015-12-06T14:15:23.000Z">2015-12-06</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Kathy Miao</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <p>在即将度过试用期的时候，借着今天学习的文章，整理一下前段时间做用户主页时用到的pjax。</p>
<p>近期我站的个人主页改版，将用户发布的各类作品放到一个页面上切换，附加筛选功能。<br>在做筛选及翻页的过程中，我们用到了pjax。即通过ajax获取数据，然后改变url链接，这样用户可以前进后退。就像这样→</p>
<p><img src="../../../../img/pushState1.png" alt="clipboard.png"></p>
<p>上面的二级导航就是筛选用哒～</p>
<p><img src="../../../../img/pushState2.png" alt="clipboard.png"></p>
<p>这个就是翻页。</p>
<p>翻页是由php直接渲染的，所以里面的链接也是php回传的。在筛选之后ajax回传数据里面，也带了翻页的数据，就可以直接添到里面。因为pushState和replaceState不能很好的兼容低版本IE，这里我们用了jquery.history插件，在使用pushState或replaceState的时候触发 ‘statechange’事件。</p>
<p>因为ajax参数是作为a标签的链接形式写入翻页里，所以在翻页时需要将参数提取出来：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$(&apos;.pager&apos;).on(&apos;click&apos;, &apos;a&apos;, function(e) &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    var href = $(this).attr(&apos;href&apos;);</span><br><span class="line">    if (!href) &#123;</span><br><span class="line">	    return;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	if ($(this).closest(&apos;.pager&apos;).hasClass(&apos;ajaxPage&apos;)) &#123;</span><br><span class="line">		changeState(href);</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		window.location.href = href;</span><br><span class="line">	&#125;;</span><br><span class="line">			    </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>先阻止a标签的跳转，然后取出链接。这里有一处判断是否是ajax页，因为页面交互涉及到其他页面跳转过来的情况，所以ajaxPage作为判断［请忽略。。。</p>
<p>接下来就是使用pushState：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var changeState = function changeState(href) &#123;</span><br><span class="line">    var parmas;</span><br><span class="line">    var href = href;</span><br><span class="line">    //取出参数（使用插件）</span><br><span class="line">	href = href.substring(href.indexOf(&apos;?&apos;));</span><br><span class="line">	parmas = $.query.parseNew(href).get();</span><br><span class="line">    var subParmas = &#123;</span><br><span class="line">	   /* state对象 */</span><br><span class="line">	&#125;;</span><br><span class="line">	var subHref;       </span><br><span class="line">	/* </span><br><span class="line">    各种判断处理</span><br><span class="line">    subHref为url要与后台约定</span><br><span class="line">    */</span><br><span class="line">    History.pushState(subParmas, $(&apos;title&apos;).text(), subHref);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>然后等到pushState的时候会触发’statechange’，我们再根据参数ajax取数据，最后呈现出来：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//当页面url更新时更新数据</span><br><span class="line">History.Adapter ? History.Adapter.bind(window,&apos;statechange&apos;,function()&#123;</span><br><span class="line">	var parmas = History.getState().data,</span><br><span class="line">    $.when($.get(ajaxlink, parmas)).done(function(result) &#123;</span><br><span class="line">	    /* </span><br><span class="line">        各种呈现处理 </span><br><span class="line">        */         </span><br><span class="line">	&#125;);</span><br><span class="line">&#125;) : &apos;&apos;;</span><br></pre></td></tr></table></figure>
<p>得益于pushState和replaceState的出现，以及jquery.history插件，这几行代码就可以有pjax效果。<br>嘛～～更多有关于pjax的应用，可以阅读学习<a href="http://tonylee.pw/2015/03/%E6%B5%85%E6%9E%90web%E5%BC%80%E5%8F%91%E4%B8%AD%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F-2/img" target="_blank" rel="noopener">浅析Web开发中前端路由实现的几种方式</a></p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2015/12/06/pushState/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <div class="icon"></div>
            
    
      <h1 class="title transition"><a href="/2015/09/05/second-interview/">【面试次体验】堆糖前端面试</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2015-09-05T12:06:39.000Z">2015-09-05</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Kathy Miao</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </ul>
        </header>
      
      <div class="entry">
        
          
            <p>在上一次失败的经历之后，本菜鸟非常努力的梳理羽毛（整理知识点），在两天后参加了堆糖的视频面试。这次面试经历总体来说比较好，可能是查漏补缺起到了效果，大部分的题目都能大体回答出来，加上面试官很nice~~~<br>Anyway，还是把面试过程整理出来。</p>
<hr>
<p>首先还是从CSS开始，有遇到与上次面试类似题目的请参考<a href="http://segmentfault.com/a/1190000003508121" target="_blank" rel="noopener">今日头条前端实习生面试</a></p>
<h2 id="CSS题目"><a href="#CSS题目" class="headerlink" title="CSS题目"></a>CSS题目</h2><p>1.如何实现一个三栏布局</p>
<p>三栏布局，问到的时候我以为是左右固定，中间自适应，后来发现他就是想考我float。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">.left,.right,.middle&#123;</span><br><span class="line">	float:left;</span><br><span class="line">	border: solid 1px #777;</span><br><span class="line">	width: 30%;</span><br><span class="line">	margin:1.55%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后面试官问我，这三个元素float了之后，对下面的元素有影响要怎么处理。</p>
<p>清除浮动问题我发现是前端面试CSS方面经常问的一个问题，详细可参考文章：<a href="http://www.iyunlu.com/view/css-xhtml/55.html" target="_blank" rel="noopener">那些年我们一起清除过的浮动</a>。</p>
<p>主要的方法有添加多余标签，然后clear: both一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;left&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;middle&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;right&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>然后CSS改一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.clear&#123;</span><br><span class="line">	clear: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二个方法是在父层容器添加overflow:auto属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;overflow&quot;&gt;</span><br><span class="line">	&lt;div class=&quot;left&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;div class=&quot;middle&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;div class=&quot;right&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.overflow&#123;</span><br><span class="line">	overflow: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第三个方法是用伪类::after</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;clearfix&quot;&gt;</span><br><span class="line">	&lt;div class=&quot;left&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;div class=&quot;middle&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;div class=&quot;right&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>由于IE6-7不支持:after，使用 zoom:1触发 hasLayout。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.clearfix::after&#123;</span><br><span class="line">	display: block;</span><br><span class="line">	content: &quot;&quot;;</span><br><span class="line">	visibility: hidden;</span><br><span class="line">	clear: both;</span><br><span class="line">&#125;</span><br><span class="line">.clearfix&#123;</span><br><span class="line">	*zoom:1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>2.position的几种属性</p>
<p>我发现这个面试官的问题都不算刁钻，position也是在学布局的时候一定要接触到的。常用的position有static、fix、absolute和relative。</p>
<p>position:static<br>这个static是默认的，对块级框的块格式化，对行级框的行格式化，元素按照块格式化上下文或行格式化上下文正常排版。</p>
<p>position:relative<br>相对定位，元素正常排版，并可以用top left right bottom进行位置的偏移，然而后面的元素不会调整位置去适应这个相对定位的元素。</p>
<p>position:absolute<br>绝对定位，元素脱离正常排版，使用top left right bottom相对于第一个非static的父层定位。</p>
<p>position:fixed<br>与absolute类似，不过使用top left right bottom定位是在视口的固定位置上。</p>
<hr>
<p>3.如何实现一个响应式布局</p>
<p>这个是一个经验题。我原以为他要问我对Bootstrap等类库的使用，加之我从没接触过移动端，对于除了使用过Bootstrap和使用百分比宽度没再尝试过别的。</p>
<p>面试官说明是要自己写响应式，然后我就说我就是用百分比设置宽度。然后他问半分比相对于谁？</p>
<p>所以说还是基础硬伤，因为自己做的时候没注意过相对于谁，而且大多是外框，所以就说相对于窗口。面试官一笑，窗口？我说好吧，我再查查。。。顺便查了一下盒模型设置的各个百分比都是相对于谁的。</p>
<p>CSS中：width、margin和padding百分比是相对于包含块的！<br>一般情况下包含块是父元素，当position: fixed的时候，包含块为视口；当position: absolute的时候，包含块为最近的position不是static的祖先。</p>
<p>除此之外，响应式布局的方法还有：<br>CSS3 Media Query</p>
<p>通过在<head><meta name="generator" content="Hexo 3.8.0">里面插入这段内容，使分辨率在小于1024分辨率的情况下和大于1024分辨率的情况下能响应不同的css文件。</head></p>
<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width; initial-scale=1.0&quot;&gt;
</code></pre><p>设置原始缩放比例和视窗的大小<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;common.css&quot; media=&quot;all&quot; /&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;normalScreen.css&quot; media=&quot;screen and (max-width: 1024px)&quot; /&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;widthScreen.css&quot; media=&quot;screen and (min-width: 1024px)&quot; /&gt;</span><br></pre></td></tr></table></figure></p>
<p>同样，可以在样式表中镶嵌@media，文章推荐参考<a href="http://www.jiawin.com/response-type-layout-design" target="_blank" rel="noopener">响应式布局这件小事</a></p>
<hr>
<h2 id="Javascript题目"><a href="#Javascript题目" class="headerlink" title="Javascript题目"></a>Javascript题目</h2><p>1.Jquery中$(‘’).click()和$(‘’).on(‘click’)的分别</p>
<p>我为了学基础，学原生的Javascript，已经很久没碰Jquery了。问到这个问题的时候，我只能很诚实的说我没有考虑过这个问题，如果让我说的话，可能是原生的JS中onclick事件与addEventListener(“click”)的区别。</p>
<p>在面试完之后，我立刻又上网查了这两个的分别，其实在效果上作用不大，就是说下列代码在实现上并没有很大差距。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#myDiv&quot;).click(function()&#123;</span><br><span class="line">    alert(&quot;clicked&quot;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#myDiv&quot;).on(&quot;click&quot;,function()&#123;</span><br><span class="line">    alert(&quot;clicked&quot;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>不同的是，on()方法可以实现动态绑定。可以将所有的点击事件绑在一个父层元素上，也可以用off()方法解绑定。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;body&quot;).on(&quot;click&quot;,&quot;button&quot;,function()&#123;</span><br><span class="line">    var btnValue = this.val();</span><br><span class="line">    alert(btnValue+&quot;clicked&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">//为每一个按钮绑定点击事件</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#myDiv&quot;).off(&quot;click&quot;);//解除点击事件绑定</span><br></pre></td></tr></table></figure>
<hr>
<p>2.JS实现一个类</p>
<p>我发现，这个问题也是面试常会问到的，而且我觉得这也是我在学习JS的时候遇到的一个难点。<br>说起类，就要提起原型链的问题，这里直接上例子。对于原型，可以直接参考我大神男友的博文<a href="http://t.zjy.name/archives/javascript-object-oriented-1.html" target="_blank" rel="noopener">Javascript 面向对象特性(1)——抛弃类</a>、<a href="http://t.zjy.name/archives/javascript-object-oriented-2.html" target="_blank" rel="noopener">Javascript 面向对象特性(2)——找回类</a>。</p>
<p>《Javascript高级程序设计》中讲到继承的时候提到了六种方式：原型链、借用构造函数、组合继承、原型式继承、寄生式继承、寄生组合式集成。</p>
<p>原型链方式的具体用法是创建一个构造函数，然后创建继承这个构造函数的引用类型，将这个引用的原型指向构造函数。在原型链的问题是，Student的原型为Person的实例，那么所有Student的实例会共享它引用类型的属性，所以实例在修改这个属性的时候会导致其他实例的实例都被修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Person(name,age)&#123;</span><br><span class="line">	this.name=name;</span><br><span class="line">	this.age=age;</span><br><span class="line">    this.sayName=function()&#123;</span><br><span class="line">        alert(this.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">function Student(school)&#123;</span><br><span class="line">	this.school=school;</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype= new Person();</span><br></pre></td></tr></table></figure>
<p>借用构造函数的用法是在一个引用类型中调用构造函数，使用apply()和call()方法可以在函数内部调用构造函数。问题是，对于Student的实例找不到哪些是Person中定义的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Person(name,age)&#123;</span><br><span class="line">	this.name=name;</span><br><span class="line">	this.age=age;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.sayName=function()&#123;</span><br><span class="line">	alert(this.name);</span><br><span class="line">&#125;</span><br><span class="line">function Student(name,age,school)&#123;</span><br><span class="line">	Person.call(this,name,age);</span><br><span class="line">	this.school=school;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>组合方式是综合了原型链与借用构造函数两种方式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function Person(name,age)&#123;</span><br><span class="line">	this.name=name;</span><br><span class="line">	this.age=age;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.sayName=function()&#123;</span><br><span class="line">	alert(this.name);</span><br><span class="line">&#125;</span><br><span class="line">function Student(name,age,school)&#123;</span><br><span class="line">	Person.call(this,name,age);</span><br><span class="line">	this.school=school;</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype= new Person();</span><br><span class="line">Student.prototype.constructor=Student;</span><br><span class="line"></span><br><span class="line">Student.prototype.saySchool=function()&#123;</span><br><span class="line">	alert(this.school);</span><br><span class="line">&#125;</span><br><span class="line">var instance1=new Student(&quot;Kathy&quot;,&quot;23&quot;,&quot;UQ&quot;);</span><br><span class="line">var instance2=new Student(&quot;Visper&quot;,&quot;24&quot;,&quot;KMUST&quot;);</span><br><span class="line"></span><br><span class="line">instance1.saySchool();//UQ</span><br><span class="line">instance2.sayName();//Visper</span><br></pre></td></tr></table></figure></p>
<p>原型式继承，方法是通过一个现有的对象创建一个新的对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//引自《Javascript高级程序设计》</span><br><span class="line">function object(o)&#123;</span><br><span class="line">    function F()&#123;&#125;</span><br><span class="line">    F.prototype = o;</span><br><span class="line">    return new F();</span><br><span class="line">&#125;</span><br><span class="line">var person = &#123;</span><br><span class="line">        name: &quot;Kathy&quot;,</span><br><span class="line">        age: &quot;23&quot;</span><br><span class="line">&#125;;</span><br><span class="line">var anotherPerson = Object.create(person);</span><br><span class="line">anotherPerson.name = &quot;Visper&quot;;</span><br><span class="line">anotherPerson.age = &quot;24&quot;;</span><br></pre></td></tr></table></figure>
<p>寄生式继承的方法是将原型式继承封装在一个方法内，然后再用工厂式的创建对象的方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//引自《Javascript高级程序设计》</span><br><span class="line">function object(o)&#123;</span><br><span class="line">    function F()&#123;&#125;</span><br><span class="line">    F.prototype = o;</span><br><span class="line">    return new F();</span><br><span class="line">&#125;</span><br><span class="line">var person = &#123;</span><br><span class="line">    name: &quot;Kathy&quot;,</span><br><span class="line">    age: &quot;23&quot;</span><br><span class="line">&#125;;</span><br><span class="line">function createPerson(original)&#123;</span><br><span class="line">    var clone=object(original); </span><br><span class="line">    clone.sayName=function()&#123;</span><br><span class="line">        alert(this.name);</span><br><span class="line">    &#125;;</span><br><span class="line">    return clone;</span><br><span class="line">￼&#125;</span><br><span class="line">var anotherPerson = createAnother(person);</span><br><span class="line">anotherPerson.name = &quot;Visper&quot;;</span><br><span class="line">anotherPerson.age = &quot;24&quot;;</span><br></pre></td></tr></table></figure>
<hr>
<p>2.如何统计一个字符串中哪个字母出现的次数最多</p>
<p>这个问题又是算法题，而算法题是我相当不擅长的。。。不过有上次选取“字符串中第一个只出现一次的字符”的经验，这次也是比较快的想出了一个方法。不过，也还是不知道这个问题的最快解决办法是什么。</p>
<p>思路还是将字符串变成数组，然后再sort()排序，之后为每一组字符计算数字，将目前出现次数最多的字符以及其次数记下来。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">function maxCountValue(string)&#123;</span><br><span class="line">	var letterArray=Array.prototype.slice.apply(string);</span><br><span class="line">	var sortArray=letterArray.sort();</span><br><span class="line">	var arrayLen=letterArray.length;</span><br><span class="line">	var countNow=0,count=0,value=sortArray[0],maxCountValue=&quot;&quot;;</span><br><span class="line">	for(var i=0;i&lt;arrayLen;i++)&#123;</span><br><span class="line">        //判断是否进入下个字符组</span><br><span class="line">		if(value==sortArray[i])&#123;</span><br><span class="line">			countNow=countNow+1;</span><br><span class="line">            //判断是否为最后一组并且判断当前次数以及目前最大次数</span><br><span class="line">			if(i==arrayLen-1&amp;count&lt;countNow)&#123;</span><br><span class="line">				maxCountValue=value;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		else&#123;</span><br><span class="line">            //如果当前次数大于目前最大次数</span><br><span class="line">			if(count&lt;countNow)&#123;</span><br><span class="line">				count=countNow;</span><br><span class="line">				maxCountValue=value;</span><br><span class="line">			&#125;</span><br><span class="line">			value=sortArray[i];</span><br><span class="line">			countNow=0</span><br><span class="line">			countNow=countNow+1;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	alert(maxCountValue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="HTTP题目以及新技术题目"><a href="#HTTP题目以及新技术题目" class="headerlink" title="HTTP题目以及新技术题目"></a>HTTP题目以及新技术题目</h2><p>HTTP题目继续问到了AJAX的问题，上一篇面试题中有整理。</p>
<p>面试官紧接着有问到form提交和ajax提交的区别？<br>Form在提交的时候，会跳转页面或者原页面刷新。而AJAX是异步的，无需页面刷新而只是部分刷新。<br>Form提交时，JS不是必需的，而且数据按照表单结构提交。AJAX需要JS来实现，而且数据也要用程序处理。</p>
<hr>
<p>之后面试官问到开发环境问题：</p>
<p>1、目前的开发环境是什么<br>曾用PC开发，使用EverEdit；这几个月转用Mac，使用HBuilder</p>
<p>2、shell操作 命令行用过什么<br>简单的前进到文件目录cd<br>列出当前文件夹内的文件 ls -li<br>改变所有人权限 chown<br>该文件读写模式 chmod</p>
<p>3、chrome的调试方法<br>Elements中查询元素结构、以及元素的样式<br>Network中查看每个资源的请求反馈时间<br>Sources中调试程序，在左栏程序文件上打断点，并在右侧输入变量名查看变量值的变化<br>Resource中查询Session、Cookie、本地存储及缓存的状态<br>Console中执行函数并查看错误行号或错误代码</p>
<p>4、代码管理工具使用过么？做哪些操作呢？<br>使用过Git：建立远程仓库，拉取本地仓库，更改之后submit，之后push到远程仓库。曾经Fork过别人的，然后修改过后也是submit再push。<br>说实话我做的个人项目比较多，对于GitHub的使用仅限于提交推送更新代码。所以也是大概的说了一下我的使用情况。</p>
<hr>
<p>新技术题目</p>
<p>接触过什么比较前沿的技术？js框架、模块化 、自动化工具、预编译语言？<br>呃。。呃。。呃。。。</p>
<p>当时我的反应好尴尬，不过也是实话实说我没接触过什么，只不过听说过angular.js、backbone.js之类的。其余的都没太听说过。。。汗</p>
<p>不过我有表示我以后会努力学习，迎头赶上！</p>
<hr>
<p>最后问道面试官对我的印象：1、经验不足，2、新技术接触的太少。</p>
<p>因为我目前时间有限，只有每天晚上整理面试题，所以这短短的几个题整理了接近一个星期，很多问题也期待大神们的补充。。。目前也算是找到了工作，今后会继续努力，让我的羽翼丰满起来！</p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2015/09/05/second-interview/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <div class="icon"></div>
            
    
      <h1 class="title transition"><a href="/2015/09/02/first-interview/">【面试初体验】今日头条面试</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2015-09-02T09:31:27.000Z">2015-09-02</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Kathy Miao</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <p>回国半个月的准海带，今天体验了一下第一场技术面试。首先是一套题目，30分钟左右的时间根据自己的水平选难题回答，答完之后之后才进行面试。面试官问了很多基础问题，也很多没能回答上。略受打击。。。</p>
<hr>
<p>后悔试题没拍照，根据回忆整理：</p>
<h2 id="CSS题目"><a href="#CSS题目" class="headerlink" title="CSS题目"></a>CSS题目</h2><p>1.上下左右居中</p>
<p>这个题面试前才看过，但问到还是不能说清楚，还是基础有硬伤<br>思路为绝对定位，在宽高一定的情况下，上下设置为50%。之后设置margin为负值，margin-top和margin-left为自身高度和宽度的一半，将位置拉回中间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.content&#123;</span><br><span class="line">	position: absolute;</span><br><span class="line">	width:400px;</span><br><span class="line">	height:400px;</span><br><span class="line">	top:50%;</span><br><span class="line">	left:50%;</span><br><span class="line">	margin:-200px 0 0 -200px;</span><br><span class="line">	border:1px solid #008800;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>2.两栏，左边固定100px，右边自适应</p>
<p>其实做布局这个用的最多最常见，我也说的蛮自信的，可惜我把两个思路的属性说混了。<br>第一个思路是左边用float:left，右边用margin-left为左栏的宽度。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">.left&#123;</span><br><span class="line">	float:left;</span><br><span class="line">	width:100px;</span><br><span class="line">	border: solid #999 1px;</span><br><span class="line">&#125;</span><br><span class="line">.right&#123;</span><br><span class="line">	margin-left: 100px;</span><br><span class="line">	border: solid #777 1px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二个思路略复杂，右栏width:100%,float:left,但是这样就会超出屏幕的宽度，于是用负值margin拉回来。但这就出现另一个问题，由于右栏缩到左栏里，所以左栏会遮盖右栏的一部分，所以在右栏内部再镶嵌一层，margin-left为左栏的宽度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">.left&#123;</span><br><span class="line">	float:left;</span><br><span class="line">	width:100px;</span><br><span class="line">	border: solid #999 1px;</span><br><span class="line">	margin-right: -100%;</span><br><span class="line">&#125;</span><br><span class="line">.right&#123;</span><br><span class="line">	float:left;</span><br><span class="line">	width:100%;</span><br><span class="line">	border: solid #777 1px;</span><br><span class="line">&#125;</span><br><span class="line">.content&#123;</span><br><span class="line">	margin-left: 100px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>补充：</strong>第三种方式是在整理下面题目的时候发现的，用display:table-cell的自适应。<br>思路还是，因为table-cell的自适应，将右栏设的尽可能的大。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">.left&#123;</span><br><span class="line">	float:left;</span><br><span class="line">	width:100px;</span><br><span class="line">	border: solid #999 1px;</span><br><span class="line">&#125;</span><br><span class="line">.right&#123;</span><br><span class="line">	display: table-cell;</span><br><span class="line">	width:3000px;</span><br><span class="line">	border: solid #777 1px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>3.盒模型</p>
<p>盒模型可以帮助块级元素的定位和计算面积，简单来说W3C的盒模型包括content、padding、border。而IE得盒模型则有些不同，表现在设置宽高的时候，W3C模型下只包含content区域，而IE包括所有区域。<br>这样，在IE下，设置了宽高之后可以很放心的设定padding，但是对于W3C模型下，设置了宽高之后还要计算padding和border的区域。因此有一个方法叫做box-sizing:border-box。border-box将border和padding区域一同算进设定的宽高内。这样的话添加如下代码，就可以设定padding而用不担心超出设置区域。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">    box-sizing:border-box;</span><br><span class="line">    -moz-box-sizing:border-box; /* Firefox */</span><br><span class="line">    -webkit-box-sizing:border-box; /* Safari */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>4.几种方法生成三个并排的大小相等的元素</p>
<p>这个问题让我有点蒙，首先想到的是三个元素都用百分比控制</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">.left,.right,.middle&#123;</span><br><span class="line">	float:left;</span><br><span class="line">	width:33.3%</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其实还有可以用display:inline-block。回家以后尝试了一下，发现问题是如果这几个元素没有在代码里写在一行，那么最后展现出来的是最后一个元素会被挤到下面一行。<br>大神男友告诉我hack方法为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">margin-right: -4px//可以按照实际调整。</span><br></pre></td></tr></table></figure>
<p>关于inline-block缝隙，推荐一篇文章：<a href="http://www.zhangxinxu.com/wordpress/2012/04/inline-block-space-remove-%E5%8E%BB%E9%99%A4%E9%97%B4%E8%B7%9D/" target="_blank" rel="noopener">去除间距</a></p>
<p>还有一个方法为tabel-cell，这种方法就是将每一个元素设置的尽可能的大，但由于自适应的特性，这三个元素还是会乖乖地等分的排在一行里。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">.left,.middle, .right&#123;</span><br><span class="line">    display:table-cell;</span><br><span class="line">	width:3000px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><em>接着昨天的继续补充</em></p>
<p>5.CSS3的新特性用过哪些</p>
<p>对于我来说最常用当然是border-radius，让圆角成为方便的存在。<br>然而他问第二个问题：怎样将方的通过圆角变成圆的？<br>其实只要</p>
<pre><code>border-radius:50%;
</code></pre><p>就好了。可惜当时我怕这个不能用百分比，于是说如果50的宽高，半径为25就好。其实这个也没错啦，但也看的出我基础不扎实。</p>
<p>除此之外，box-shadow也是咱常用的属性之一。设置水平、垂直的位移，阴影的模糊、尺寸还有颜色，就可以为元素添加阴影。</p>
<pre><code>box-shadow: 2px 2px 3px #777;
</code></pre><p>然后我也提了一下border-image这个好用又漂亮的属性。通过设置图片路径，图片的切割方式、还有边框的宽度、溢出，以及平铺或拉伸等呈现方式，可以做出一个漂亮精致的边框。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">border-image: url(border-image.png) 30/10px/10px round;</span><br></pre></td></tr></table></figure>
<p>关于border-image的每一项属性的用法和限制，可以参考我大神男友的文章<a href="http://t.zjy.name/archives/css3-border-image.html" target="_blank" rel="noopener">CSS 3 border-image 属性详解</a></p>
<p>面试官还问到了<strong>动画</strong>：transition、transform和animation的区别？<br>可惜我目前并没有用CSS做过动画【摊手。。<br>他专门问到了这个问题，说明CSS3的动画是应用较多的，回来立刻学习。</p>
<p>transform是指转换，可以将元素移动、旋转、倾斜、拉伸。</p>
<p>translate()，从当前位置移动到由给定left和top值的位置。这个例子中，div向右下移动，如果想要往左上移动，则要设置为负值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">    transform: translate(50px,100px);</span><br><span class="line">    -ms-transform: translate(50px,100px);		/* IE 9 */</span><br><span class="line">    -webkit-transform: translate(50px,100px);	/* Safari and Chrome */</span><br><span class="line">    -o-transform: translate(50px,100px);		/* Opera */</span><br><span class="line">    -moz-transform: translate(50px,100px);		/* Firefox */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>rotate()，将元素旋转到给定角度，单位为deg（degree角度），在这个例子中为顺时针30度。负值的话为逆时针旋转。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">    transform: rotate(30deg);</span><br><span class="line">    -ms-transform: rotate(30deg);		/* IE 9 */</span><br><span class="line">    -webkit-transform: rotate(30deg);	/* Safari and Chrome */</span><br><span class="line">    -o-transform: rotate(30deg);		/* Opera */</span><br><span class="line">    -moz-transform: rotate(30deg);		/* Firefox */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>skew() ，将元素倾斜到给定角度，单位也是deg，分别围绕着X轴和Y轴翻转。这个例子中，在X轴顺时针翻转30度，Y轴顺时针翻转20度，负值为逆时针翻转。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">    transform: skew(30deg,20deg);</span><br><span class="line">    -ms-transform: skew(30deg,20deg);	/* IE 9 */</span><br><span class="line">    -webkit-transform: skew(30deg,20deg);	/* Safari and Chrome */</span><br><span class="line">    -o-transform: skew(30deg,20deg);	/* Opera */</span><br><span class="line">    -moz-transform: skew(30deg,20deg);	/* Firefox */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>scale()，将元素拉伸到指定的倍数，同样设定了X与Y两个方向。这个例子中把宽度拉伸2倍，高度拉伸4倍。有意思的是，负值不是缩小，而是翻转，既水平翻转和垂直翻转。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">    transform: scale(2,4);</span><br><span class="line">    -ms-transform: scale(2,4);	/* IE 9 */</span><br><span class="line">    -webkit-transform: scale(2,4);	/* Safari 和 Chrome */</span><br><span class="line">    -o-transform: scale(2,4);	/* Opera */</span><br><span class="line">    -moz-transform: scale(2,4);	/* Firefox */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>transform并没有变化的过程，而是直接生成最终效果。transform还有3D方法，就是多了一个Z轴（Opera不支持）</p>
<ul>
<li>transition是指过渡，可以动画般显示出一个从样式到样式之间的过渡。</li>
</ul>
<p>上面说过transform没有变化的过程，这样一来就可以动画显示出各种酷炫的效果。<br>transform的属性包括一个你设定过渡的CSS属性，持续时间，时间曲线还有过渡开始的时间。</p>
<p>比较麻烦的写法，每一项属性单独写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">    transition-property: width;</span><br><span class="line">    transition-duration: 1s;</span><br><span class="line">    transition-timing-function: linear;</span><br><span class="line">    transition-delay: 2s;</span><br><span class="line">    /* Firefox 4 */</span><br><span class="line">    -moz-transition-property:width;</span><br><span class="line">    -moz-transition-duration:1s;</span><br><span class="line">    -moz-transition-timing-function:linear;</span><br><span class="line">    -moz-transition-delay:2s;</span><br><span class="line">    /* Safari 和 Chrome */</span><br><span class="line">    -webkit-transition-property:width;</span><br><span class="line">    -webkit-transition-duration:1s;</span><br><span class="line">    -webkit-transition-timing-function:linear;</span><br><span class="line">    -webkit-transition-delay:2s;</span><br><span class="line">    /* Opera */</span><br><span class="line">    -o-transition-property:width;</span><br><span class="line">    -o-transition-duration:1s;</span><br><span class="line">    -o-transition-timing-function:linear;</span><br><span class="line">    -o-transition-delay:2s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简单的写法就是将属性都写在transition中。下面例子中包括了之前我们将transform的旋转，效果比较酷炫。（背景用色有点小私心，不过过渡很漂亮<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">    width:100px;</span><br><span class="line">    height:100px;</span><br><span class="line">    background:lavender;</span><br><span class="line">    transition:width 2s, height 2s, background 2s;</span><br><span class="line">    -moz-transition:width 2s, height 2s, -moz-transform 2s; /* Firefox 4 */</span><br><span class="line">    -webkit-transition:width 2s, height 2s, -webkit-transform 2s, background 2s; /* Safari and Chrome */</span><br><span class="line">    -o-transition:width 2s, height 2s, background 2s, -o-transform 2s; /* Opera */</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line">div:hover&#123;</span><br><span class="line">    width:200px;</span><br><span class="line">    height:200px;</span><br><span class="line">    background:LightSeaGreen;</span><br><span class="line">    transform:rotate(180deg);</span><br><span class="line">    -moz-transform:rotate(180deg); /* Firefox 4 */</span><br><span class="line">    -webkit-transform:rotate(180deg); /* Safari and Chrome */</span><br><span class="line">    -o-transform:rotate(180deg); /* Opera */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>animation，用@keyframes规则做动画效果。</li>
</ul>
<p>如果说transition是过渡中的动画效果，那么animation就是专门做动画的。transition是animation的简化，是当属性发生变化的时候，触发过渡动画。就是上面例子中hover的时候，css的属性变化了，那么在transition里面绑定过得属性动画过渡过去。<br>animation就复杂多了：@keyframes可以有from to，也可以是百分比表示时间帧。</p>
<p>from-to<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@keyframes myfirst&#123;</span><br><span class="line">    from &#123;background: lavender;&#125;</span><br><span class="line">    to &#123;background: LightSeaGreen;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>百分比</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@keyframes myfirst&#123;</span><br><span class="line">    0%   &#123;background: purple;&#125;</span><br><span class="line">    25%  &#123;background: lavender;&#125;</span><br><span class="line">    50%  &#123;background: cyan;&#125;</span><br><span class="line">    75% &#123;background: LightSeaGreen;&#125;</span><br><span class="line">    100% &#123;background:purple;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后再将这个@keyframes绑定到一个元素上。<br>animation提供了更多属性，包括@keyframes名字、持续时间、速度曲线、开始时间、播放次数等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">    animation: myfirst 5s linear 2s infinite alternate;</span><br><span class="line">    /* Firefox: */</span><br><span class="line">    -moz-animation: myfirst 5s linear 2s infinite alternate;</span><br><span class="line">    /* Safari 和 Chrome: */</span><br><span class="line">    -webkit-animation: myfirst 5s linear 2s infinite alternate;</span><br><span class="line">    /* Opera: */</span><br><span class="line">    -o-animation: myfirst 5s linear 2s infinite alternate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有了这几个属性，css可以在很多时候取代flash和动图了。</p>
<hr>
<h2 id="JavaScript题目"><a href="#JavaScript题目" class="headerlink" title="JavaScript题目"></a>JavaScript题目</h2><p>可能因为笔试中JS题目较多，所以面试的时候没有问太多。</p>
<p>1.优化代码，事件委托</p>
<p>笔试的题目上给了一段代码让我优化。具体代码记不清，大概是获取<a>的元素，然后循环为每一个添加mouseover和mouseout事件。</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">var elementList=document.querySelectorAll(&quot;a&quot;);</span><br><span class="line">var listLen=elementList.length;</span><br><span class="line">function handler (element,color)&#123;</span><br><span class="line">	return function()&#123;</span><br><span class="line">		element.style.color=color;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line">//添加事件方法</span><br><span class="line">function addEvent(element,type,handler)&#123;</span><br><span class="line">	if(element.addEventListener)&#123;</span><br><span class="line">		element.addEventListener(type,handler,false);</span><br><span class="line">	&#125;</span><br><span class="line">	else if(element.attachEvent)&#123;</span><br><span class="line">		element.attachEvent(&quot;on&quot;+type,handler);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//循环为元素添加事件</span><br><span class="line">for(i=0;i&lt;listLen;i++)&#123;</span><br><span class="line">	addEvent(elementList[i],&quot;mouseover&quot;,handler(elementList[i],&quot;red&quot;));</span><br><span class="line">	addEvent(elementList[i],&quot;mouseout&quot;,handler(elementList[i],&quot;black&quot;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后面试官又问我为什么事件委托效率更高</p>
<p>还是基础硬伤，我只是大概知道什么是事件委托，对于原理还不了解。于是回来又查参考书《Javascript高级程序设计》</p>
<blockquote>
<p>事件委托利用了事件冒泡，指定一个事件处理程序，就可以管理某一个类型的所有事件。</p>
</blockquote>
<p>书上解释，在DOM树中尽量高的层次上添加一个事件处理程序。那么在他的子孙元素中的事件，最终都会冒泡到这个层次中。例如，列表里有两个项目，我们不要分别设置每一个项目点击时的事件，而是在上层中建立事件委托。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=&quot;link&quot;&gt;</span><br><span class="line">    &lt;li id=&quot;home&quot;&gt;首页&lt;/li&gt;</span><br><span class="line">   	&lt;li id=&quot;resume&quot;&gt;简历&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">var link = document.querySelector(&quot;#link&quot;);</span><br><span class="line">//添加事件</span><br><span class="line">function addEvent(element,type,handler)&#123;</span><br><span class="line">	if(element.addEventListener)&#123;</span><br><span class="line">		element.addEventListener(type,handler,false);</span><br><span class="line">	&#125;</span><br><span class="line">	else if(element.attachEvent)&#123;</span><br><span class="line">		element.attachEvent(&quot;on&quot;+type,handler);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//获取事件对象，因为奇葩的IE，事件对象要用window.event</span><br><span class="line">function getEvent(event)&#123;</span><br><span class="line">    return event ? event : window.event;</span><br><span class="line">&#125;</span><br><span class="line">//获取事件目标</span><br><span class="line">function getTarget(event)&#123;</span><br><span class="line">    return event.target || event.srcElement;</span><br><span class="line">&#125;</span><br><span class="line">//为外层ul添加事件委托</span><br><span class="line">addEvent(link,&quot;click&quot;,function(event)&#123;</span><br><span class="line">    event = getEvent(event);</span><br><span class="line">    var target = getTarget(event);</span><br><span class="line">    //为每一个li添加事件</span><br><span class="line">   	switch(target.id)&#123;</span><br><span class="line">       	case &quot;home&quot;:</span><br><span class="line">       	    target.innerHTML=&quot;首页，&lt;a href=&apos;http://myj.name/&apos;&gt;Welcome to my home&lt;/a&gt;&quot;</span><br><span class="line">	    break;</span><br><span class="line">	    case &quot;resume&quot;:</span><br><span class="line">	        location.href = &quot;http://katherina-miao.github.io/resume/&quot;;</span><br><span class="line">	    break;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<hr>
<p>2.添加一个类似email中checklist的双向联动</p>
<p>起初，我的内心是崩溃的。。。<br>这个题刚开始都没搞清楚是做什么的，一直到做完整个卷子我才又回头看了看这个题。时间有限，都没来得及想就往纸上写。<br>其实这个题是让我做一个类似email里选择发件人的东西，勾选的时候添加到发件人，取消勾选的时候从发件人里面删除。由于是双向联动，因此要在发件人里点击的时候可以删除，并且取消勾选。好像说的有点乱，看下面代码。</p>
<p>其实主要还是事件绑定，然后添加节点，改变属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;container&quot;&gt;</span><br><span class="line">	&lt;div class=&quot;showbox&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;input type=&quot;checkbox&quot; name=&quot;email&quot; value=&quot;i@myj.name&quot;&gt;Kathy&lt;/input&gt;</span><br><span class="line">	&lt;input type=&quot;checkbox&quot; name=&quot;email&quot; value=&quot;i@zjy.name&quot;&gt;Visper&lt;/input&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">var emails=document.querySelectorAll(&quot;[name=email]&quot;);</span><br><span class="line">var showBox=document.querySelector(&quot;.showbox&quot;);</span><br><span class="line">var length=emails.length;</span><br><span class="line">//添加事件</span><br><span class="line">function addEvent(element,type,handler)&#123;</span><br><span class="line">	if(element.addEventListener)&#123;</span><br><span class="line">		element.addEventListener(type,handler,false);</span><br><span class="line">	&#125;</span><br><span class="line">	else if(element.attachEvent)&#123;</span><br><span class="line">		element.attachEvent(&quot;on&quot;+type,handler);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//循环，为每个checkbox添加事件</span><br><span class="line">for(var i=0;i&lt;length;i++)&#123;</span><br><span class="line">	addEvent(emails[i],&quot;click&quot;,function()&#123;</span><br><span class="line">        //判断是否被选中</span><br><span class="line">		if(this.checked)&#123;</span><br><span class="line">			var Emailvalue = this.value;</span><br><span class="line">			var newBtn=document.createElement(&quot;input&quot;);</span><br><span class="line">			newBtn.setAttribute(&quot;type&quot;,&quot;button&quot;);</span><br><span class="line">			</span><br><span class="line">			newBtn.value=Emailvalue;</span><br><span class="line">			showBox.appendChild(newBtn);</span><br><span class="line">		&#125;</span><br><span class="line">        //若取消勾选，则删除相应的button</span><br><span class="line">		else&#123;</span><br><span class="line">			var Emailvalue = this.value;</span><br><span class="line">			var emailBtn=document.querySelector(&quot;[type=button][value=&apos;&quot;+Emailvalue+&quot;&apos;]&quot;);</span><br><span class="line">			showBox.removeChild(emailBtn);</span><br><span class="line">		&#125;</span><br><span class="line">        //每次重新调用以更新button</span><br><span class="line">		startBtn();</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line">//获取button列表，为button添加事件</span><br><span class="line">function startBtn()&#123;</span><br><span class="line">	var emailBtn=document.querySelectorAll(&quot;[type=button]&quot;);</span><br><span class="line">	if(emailBtn.length)&#123;</span><br><span class="line">		for(var i=0;i&lt;emailBtn.length;i++)&#123;</span><br><span class="line">			addEvent(emailBtn[i],&quot;click&quot;,function()&#123;</span><br><span class="line">				var btnvalue=this.value;</span><br><span class="line">				var cancelChoose=document.querySelectorAll(&quot;[value=&apos;&quot;+btnvalue+&quot;&apos;]&quot;);</span><br><span class="line">				//删除button并取消勾选相应checkbox</span><br><span class="line">				for(var j=0;j&lt;cancelChoose.length;j++)&#123;</span><br><span class="line">					if(cancelChoose[j].getAttribute(&quot;type&quot;)==&quot;button&quot;)&#123;</span><br><span class="line">						showBox.removeChild(cancelChoose[j]);</span><br><span class="line">					&#125;</span><br><span class="line">					else if(cancelChoose[j].getAttribute(&quot;type&quot;)==&quot;checkbox&quot;)&#123;</span><br><span class="line">						cancelChoose[j].checked=false;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>3.Array的方法</p>
<p>面试官问到Array有几种方法，这个我在面试前曾经简单整理过，所以感觉回答也比较满意。</p>
<p>isArray()，判断是否为Array类型。<br>join()，将Array类型转换为字符串类型,并用join内的符号间隔开。</p>
<p>队列，栈的用法<br>push()，将数据项放到数组的后面。<br>pop()，将数组的最后一项删除并返回。<br>shift()，将数组的第一项删除并返回。<br>unshift()，将数据项放到数组的前面。</p>
<p>重排序的方法<br>reverse()，将数组逆序排列。<br>sort()，将数组由小到大排列。默认是按照字符串比较，也就是说15比5小。要按照数字排列的话，要设定方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var numlist = [0, 5, 15, 20, 10];</span><br><span class="line">function compare (value1, value2)&#123;</span><br><span class="line">	value2-value1;</span><br><span class="line">&#125;</span><br><span class="line">var listsort = numlist.sort(compare);</span><br><span class="line">alert( listsort );//0, 5, 10, 15, 20 按照数值从小到大</span><br></pre></td></tr></table></figure>
<p>操作Array的方法<br>concat()，在原有meat数组上创建新数组<br>slice()，截取从指定位置开始到结束为止(不包含结束位置)的数组项赋给新数组，如果没有第二个参数，则截取从指定位置开始到结束的数组项赋给新数组<br>splice()，从指定位置(第一个参数)删除指定个数(第二个参数)并插入指定项目(’第三个参数”)</p>
<p>位置方法<br>indexOf()，从前向后查找位置索引。<br>lastIndexOf()，从后向前查找位置索引。<br>这两个方法支持第二个参数，既指定位置然后按照方法向前或向后查找位置。</p>
<p>遍历方法<br>every()中，每一项运行给定函数，每一项都返回true,否则返回true。<br>filter()中，每一项运行给定函数，返回true的项。<br>forEach()中，每一项运行给定函数，无返回。<br>map()中，每一项运行给定函数，返回调用结果组成的数组。<br>some()中，每一项运行给定函数，任意一项返回true，否则返回true。 </p>
<p>归并方法<br>reduce()和reduceRight()都接受四个参数：前一个值，当前值，索引和数组对象。<br>reduce()是从左向右归并，当第一个值和第二个值运行过之后，结果将作为下一次运行的前一个值。<br>reduceRight()则是从右向左，归并方式与reduce()一样。</p>
<hr>
<h2 id="算法题"><a href="#算法题" class="headerlink" title="算法题"></a>算法题</h2><p>算法题就一个，给定字符串“abcba”，处理得到第一个不重复字母。</p>
<p>对算法实在只是了解个皮毛，所以这个问题估计最后还是写错了。回来后自己写了一个，可以得到答案，但也不知道是不是最优。<br>思路是首先将字符转换成数组，然后从小到大排序，然后循环对每一个数组项比较前后。因为曾经排序，如果是不重复的那么前后应该都与它不同。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var letterString=&quot;abcba&quot;;</span><br><span class="line">var letterArray=Array.prototype.slice.apply(letterString);</span><br><span class="line">var arrayLen=letterArray.length;</span><br><span class="line">var sortArray=letterArray.sort();</span><br><span class="line">for(var i=0;i&lt;arrayLen;i++)&#123;</span><br><span class="line">	if(sortArray[i]!=sortArray[i+1]&amp;&amp;sortArray[i]!=sortArray[i-1])&#123;</span><br><span class="line">		alert(sortArray[i]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><p>1.AJAX过程，AJAX中如何区分get和post，get和post的区别</p>
<p>面试官在这个方面一气儿问了三个问题，可能因为我没一个问题都没能答的全面。</p>
<p>AJAX算是听人说的最多的一个技术，无需加载整个页面的情况下进行局部更新。<br>再用AJAX技术与服务器交换数据时，首先创建一个XMLHttpRequest对象，在特立独行的IE里是ActiveXObject。</p>
<p>接着我们用open()方法和send()方法，使用get和post会有些区别。然后，请求会发送给服务器，服务器会响应触发onreadystatechange事件，当readyState=4（请求完成）且status=200时，说明服务器已经就绪。然后用responseText或responseXML属性去获得字符串或XML格式的数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var xmlhttp;</span><br><span class="line">if (window.XMLHttpRequest)&#123;</span><br><span class="line">    xmlhttp=new XMLHttpRequest();</span><br><span class="line">&#125;</span><br><span class="line">else&#123;</span><br><span class="line">    //奇葩的IE5、6</span><br><span class="line">    xmlhttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp.open(&quot;GET&quot;,&quot;response.php&quot;,true);</span><br><span class="line">xmlhttp.send();</span><br><span class="line"></span><br><span class="line">xmlhttp.onreadystatechange=function()&#123;</span><br><span class="line">    if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)&#123;</span><br><span class="line">        document.getElementById(&quot;showBox&quot;).innerHTML=xmlhttp.responseText;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>在AJAX中区别get和post，就要详谈open()方法和send()方法。</p>
<p>get请求常用于向服务器查询信息。</p>
<p>在get请求中，open()的第一个参数为“get”，第二个参数为URL，第三个参数为是否为异步。由于get请求的URL中通常带有参数，这些参数必须要使用encodeURIComponent()方法进行编码，否则会有格式错误。这样send()方法内部的参数可以传入null，传入的参数也会转到URL中。</p>
<p>post请求常用于向服务器提交信息。</p>
<p>在post请求中，open()的第一个参数为“post”，URL中不含有参数，第三个参数一样。post请求的send()方法中需要传入提交数据，可以使用XML或者字符串。在提交表单时，首先要设定请求头部的Content-Type为 application/x-www-form-urlencoded。</p>
<pre><code>xhr.setRequestHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;); 
</code></pre><p>然后将传入的表单信息序列化，方便后端的程序获取数据。对于表单数据序列化，FormData对象可以直接放入send()内:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=“user-info”&gt;</span><br><span class="line">	用户名：&lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt;</span><br><span class="line">	年龄：&lt;input type=&quot;text&quot; name=&quot;年龄&quot;/&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var form = document.getElementById(&quot;user-info&quot;);</span><br><span class="line">xhr.send(new FormData(form));</span><br></pre></td></tr></table></figure>
<p>前面提过，get方式中url包含参数，而post中url是“干干净净”的。因为用处不同，post在提交内容的时候没有大小限制。而且post在发送时有内容体，那些提交的信息放在内容体内。</p>
<hr>
<p>2.JSONP 跨域的特性</p>
<p>说实话我只在用JQuery的时候用过JSONP，只知道可以跨域，但不知道为什么可以。所以在被问到的时候，脑子又是一蒙。</p>
<p>由于跨域安全策略，XMLHttpRequest不能跨域请求，这是AJAX的一个主要限制。<br>JSONP是通过<code>&lt;script&gt;</code>元素。因为我们知道，<code>&lt;script&gt;</code>可以跨域引用js文件。返回的数据格式为JSON，创建一个回调函数来相应返回的数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var script = document.createElement(&quot;script&quot;);</span><br><span class="line">script.src = &quot;http://tryjson.org?callback=handler&quot;;</span><br><span class="line">document.body.appendChild(script);</span><br><span class="line"></span><br><span class="line">//回调函数</span><br><span class="line">function handler(response)&#123;</span><br><span class="line">    var responseContent=&#123;</span><br><span class="line">        diatotime:response.datetime,</span><br><span class="line">        usedEnergy:response.used.Energy,</span><br><span class="line">        …</span><br><span class="line">    &#125;</span><br><span class="line">    return responseContent；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除了JSONP，用img标签也可以跨域通信。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var img = new Image();</span><br><span class="line">img.src = &quot;http://www.example.com/id=123&quot;;</span><br></pre></td></tr></table></figure>
<p>CORS是跨域请求的另一个方法。在IE浏览器中为XDomainRequest对象，而在其他浏览器中则继续用XMLHttpRequest。区别在于，XDomainRequest对象的open()只有两个参数：请求类型和URL，因为都是异步执行。而其他浏览器在使用open()时，URL要使用绝对路径，既可以跨域请求。</p>
<p>3.提高网页性能的方法</p>
<p>因为刚刚问完AJAX，所以首先反应的是使用AJAX部分刷新。然后我想到了CSS精灵，将小图片放在一起减少HTTP请求。然后想到将script和css从外部引入，然后script放在文档底部。</p>
<p>除此之外，总结一下：在内容上压缩，在请求上减少。压缩图片、脚本和CSS，使用CSS精灵，优化图片，尽量使用<link>引用CSS。在请求上避免重定向，尽量使用AJAX尽量使用GET请求。</p>
<p>在优化性能方面，我没什么研究，还是由于对底层原理不熟【汗。。</p>
<hr>
<p>这次的面试经历整理了一天多，一是因为实在是基础差，每一题都要查资料，编程题要自己试，二是要激励自己。因为自己是很懒的人，不喜欢上网找文章资料。这次面试算是一个鞭策，将自己漏洞补起来。</p>
<p>希望各路大神评论补充！！本菜鸟道谢~~</p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2015/09/02/first-interview/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>





<nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright"><div class="padding">
	
	  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:www.myj.name">
  </form>
</div>
	
	  
<div class="widget recent-post">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2019/11/25/multiChannel-share/">多渠道分享实践</a>
      </li>
    
      <li>
        <a href="/2017/09/05/commonjsEsm/">Node.js, TC-39, and Modules</a>
      </li>
    
      <li>
        <a href="/2016/05/12/todolist-react/">【练手】Webpack+React开发Todolist项目</a>
      </li>
    
      <li>
        <a href="/2015/12/06/pushState/">【经验总结】pushState＋ajax应用</a>
      </li>
    
      <li>
        <a href="/2015/09/05/second-interview/">【面试次体验】堆糖前端面试</a>
      </li>
    
  </ul>
</div>

	
	  
	
	  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  
    <a href="/tags/React/">React<small>1</small></a>
  
    <a href="/tags/Webpack/">Webpack<small>1</small></a>
  
    <a href="/tags/commonjs/">commonjs<small>1</small></a>
  
    <a href="/tags/html5/">html5<small>1</small></a>
  
    <a href="/tags/javascript/">javascript<small>1</small></a>
  
    <a href="/tags/modules/">modules<small>1</small></a>
  
    <a href="/tags/multi-channel/">multi-channel<small>1</small></a>
  
    <a href="/tags/nodejs/">nodejs<small>1</small></a>
  
    <a href="/tags/open-graph/">open graph<small>1</small></a>
  
    <a href="/tags/pjax/">pjax<small>1</small></a>
  
    <a href="/tags/share/">share<small>1</small></a>
  
    <a href="/tags/前端面试/">前端面试<small>2</small></a>
  
</div>

	
</div></aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="padding">
	<div class="alignleft">
	  
	  &copy; 2019 Kathy Miao
	  
	  Powerd by <a href="http://hexo.io/" target="_blank">hexo</a>
	  and Theme by <a href="https://github.com/halfer53/metro-light" target="_blank">metro-light</a>
	</div>

	<div class="alignright">
		
		
		
		
		
		
		
	</div>

	<div class="clearfix"></div>
</div>

<div class="scroll-top"><i class="fa fa-arrow-circle-up"></i></div></footer>
  


<script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.0.4/jquery.imagesloaded.js"></script>
<script src="/js/gallery.js"></script>



<script type="text/javascript">
$(window).scroll(function() {

    if($(this).scrollTop() > 400) {
        $('.scroll-top').fadeIn(200);
    } else {
        $('.scroll-top').fadeOut(200);
    }
});

$('.scroll-top').bind('click', function(e) {
    e.preventDefault();
    $('body,html').animate({scrollTop:0},200);
});
</script>


</body>
</html>
